<div class="container">
  <div class="main-content">
    <!-- <p *ngIf="isOperational">You are already Operational</p> -->
    <form
      [formGroup]="addDriverOperationalForm"
      class="form-container"
      *ngIf="!isDriverOps; else removeBtn"
    >
      <mat-form-field appearance="outline">
        <mat-label>Start Time</mat-label>
        <input
          class="start-time-inp"
          type="time"
          [placeholder]="'eg. 11:00 AM'"
          formControlName="startTime"
          matInput
          readonly
        />
        <mat-error *ngIf="addDriverOperationalForm.hasError('timeDifference')">
          End time must be at least 7 hours after start time.
        </mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>End Time</mat-label>
        <input type="time" formControlName="endTime" matInput />
      </mat-form-field>
      <button
        class="add-button"
        [disabled]="addDriverOperationalForm.invalid || cabId.invalid"
        mat-raised-button
        (click)="onSubmit()"
      >
        Start Shift
      </button>
    </form>
    <ng-template #removeBtn>
      <button
        class="add-button"
        mat-raised-button
        (click)="onLogout()"
      >
        End Shift
      </button>
    </ng-template>

    <div class="list-container" *ngIf="!isDriverOps; else driverOpsDetails">
      <div appearance="fill">
        <mat-label>Select Cab</mat-label>
        <mat-selection-list [formControl]="cabId" [multiple]="false">
          @for (cab of driverCabs; track cab) {
          <mat-list-option [value]="cab.id">{{ cab.model }}</mat-list-option>
          }
        </mat-selection-list>
      </div>
    </div>
    <ng-template style="display: block" #driverOpsDetails>
      <div>
        <p>Your Operational now!</p>
        <p><b>Cab</b> : {{ isDriverOps?.cab?.model }}</p>
        <p><b>Registration Number</b> : {{ isDriverOps?.cab?.registerNo }}</p>
        <p><b>Seating Capacity</b> : {{ isDriverOps?.cab?.seatingCapacity === 'SEVEN_SEATER' ? 7 : 5 }}</p>
      </div>
    </ng-template>
  </div>
</div>
